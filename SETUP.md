# 3X-UI 配置指南

## 首次设置步骤

### 1. 登录管理界面
- 访问: `https://你的域名:2053`
- 用户名: `admin`
- 密码: `admin`

### 2. 修改管理员密码
1. 点击右上角用户图标
2. 选择 "账户设置"
3. 修改用户名和密码
4. 启用两步验证（推荐）

### 3. 基本系统设置
1. 进入 "面板设置"
2. 设置面板 URL（你的域名）
3. 配置时区: Asia/Shanghai
4. 启用 HTTPS（如果有证书）

## 协议配置指南

### VMess + WebSocket + TLS（推荐）

**适用场景**: 通用性最好，支持 CDN

**配置步骤**:
1. 点击 "入站列表" > "添加入站"
2. 选择协议: `vmess`
3. 端口: `443`
4. 传输协议: `ws` (WebSocket)
5. 路径: `/vmessws` (自定义)
6. 启用 TLS: `是`
7. 证书文件路径: `/root/cert/fullchain.pem`
8. 私钥文件路径: `/root/cert/private.pem`

### VLESS + WebSocket + TLS

**适用场景**: 性能更好，无加密开销

**配置步骤**:
1. 协议: `vless`  
2. 端口: `8443`
3. 传输协议: `ws`
4. 路径: `/vlessws`
5. 启用 TLS: `是`
6. 流控: `留空`

### Trojan + TLS

**适用场景**: 伪装性最好

**配置步骤**:
1. 协议: `trojan`
2. 端口: `443`
3. 传输协议: `tcp`
4. 启用 TLS: `是`
5. 回落地址: `127.0.0.1:80`

### Shadowsocks

**适用场景**: 轻量简单

**配置步骤**:
1. 协议: `shadowsocks`
2. 端口: `8080`
3. 加密方式: `aes-256-gcm`
4. 密码: 自动生成

## 用户管理

### 添加用户
1. 在对应的入站配置中点击 "操作" > "用户列表"
2. 点击 "添加用户"
3. 设置用户备注
4. 配置流量限制（可选）
5. 设置过期时间（可选）

### 获取连接信息
1. 在用户列表中找到对应用户
2. 点击 "二维码" 获取客户端配置
3. 点击 "链接" 复制连接字符串

## SSL 证书配置

### 方式一: 自动获取（推荐）
1. 确保域名已解析到服务器
2. 在 "面板设置" 中配置域名
3. 启用 "自动申请证书"

### 方式二: 手动上传
1. 将证书文件放置到 `./cert/` 目录
2. 确保文件名为:
   - `fullchain.pem` (证书链)
   - `private.pem` (私钥)

## 客户端连接

### 推荐客户端
- **Windows**: v2rayN, Clash for Windows
- **macOS**: V2rayU, ClashX
- **iOS**: Shadowrocket, Quantumult X
- **Android**: v2rayNG, Clash for Android

### 连接测试
1. 扫描二维码或导入配置
2. 选择节点并连接
3. 访问 https://ipinfo.io 验证 IP

## 故障排除

### 常见问题
1. **无法访问管理界面**
   - 检查端口 2053 是否开放
   - 确认 LeapCell 服务运行状态

2. **证书错误**
   - 检查域名是否正确解析
   - 验证证书文件路径和权限

3. **连接失败**
   - 检查防火墙设置
   - 验证协议配置是否正确

### 日志查看
- 容器日志: `docker logs 3x-ui`
- 面板日志: 管理界面 > 日志

## 安全建议

1. **修改默认端口**: 避免使用常见端口
2. **定期更换密码**: 管理员密码和用户密钥
3. **流量监控**: 定期检查异常流量
4. **备份配置**: 定期备份数据库文件